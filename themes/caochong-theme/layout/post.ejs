<article class="post-detail">
  <!-- Post Header -->
  <header class="post-header">
    <div class="container">
      <h1 class="post-title-main"><%= page.title %></h1>

      <div class="post-meta-main">
        <div class="meta-left">
          <time class="post-date" datetime="<%= page.date.toJSON() %>">
            <svg viewBox="0 0 24 24" width="16" height="16">
              <path fill="currentColor" d="M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10z"/>
            </svg>
            <%= page.date.format('YYYY年MM月DD日') %>
          </time>

          <% if (page.updated && page.updated.isAfter(page.date)) { %>
            <span class="post-updated">
              <svg viewBox="0 0 24 24" width="16" height="16">
                <path fill="currentColor" d="M21 10.12h-6.78l2.74-2.82c-2.73-2.7-7.15-2.8-9.88-.1-2.73 2.71-2.73 7.08 0 9.79s7.15 2.71 9.88 0C18.32 15.65 19 14.08 19 12.1h2c0 1.98-.88 4.55-2.64 6.29-3.51 3.48-9.21 3.48-12.72 0-3.5-3.47-3.53-9.11-.02-12.58s9.14-3.47 12.65 0L21 3v7.12zM12.5 8v4.25l3.5 2.08-.72 1.21L11 13V8h1.5z"/>
              </svg>
              更新于 <%= page.updated.format('YYYY年MM月DD日') %>
            </span>
          <% } %>

          <% if (page.categories && page.categories.length) { %>
            <a href="<%= url_for(page.categories.data[0].path) %>" class="post-category-link">
              <svg viewBox="0 0 24 24" width="16" height="16">
                <path fill="currentColor" d="M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"/>
              </svg>
              <%= page.categories.data[0].name %>
            </a>
          <% } %>
        </div>
      </div>
    </div>
  </header>

  <% if (page.cover) { %>
    <div class="post-cover-main">
      <img src="<%= url_for(page.cover) %>" alt="<%= page.title %>">
    </div>
  <% } %>

  <!-- Post Content -->
  <div class="container">
    <div class="post-layout">
      <div class="post-body">
        <%- page.content %>
      </div>

      <% if (theme.post.toc && page.toc !== false) { %>
        <aside class="post-toc">
          <div class="toc-wrapper">
            <h3 class="toc-title">目录</h3>
            <div class="toc-content">
              <%- toc(page.content, {list_number: false}) %>
            </div>
          </div>
        </aside>
      <% } %>
    </div>

    <!-- Post Tags -->
    <% if (page.tags && page.tags.length) { %>
      <div class="post-tags-section">
        <svg viewBox="0 0 24 24" width="20" height="20">
          <path fill="currentColor" d="M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58s1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41s-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"/>
        </svg>
        <div class="post-tags-list">
          <% page.tags.each(function(tag) { %>
            <a href="<%= url_for(tag.path) %>" class="post-tag-item">#<%= tag.name %></a>
          <% }); %>
        </div>
      </div>
    <% } %>

    <!-- Post Navigation -->
    <nav class="post-nav">
      <% if (page.prev) { %>
        <a href="<%= url_for(page.prev.path) %>" class="post-nav-item prev">
          <div class="nav-label">← 上一篇</div>
          <div class="nav-title"><%= page.prev.title %></div>
        </a>
      <% } %>

      <% if (page.next) { %>
        <a href="<%= url_for(page.next.path) %>" class="post-nav-item next">
          <div class="nav-label">下一篇 →</div>
          <div class="nav-title"><%= page.next.title %></div>
        </a>
      <% } %>
    </nav>
  </div>
</article>
